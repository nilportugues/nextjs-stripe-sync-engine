model Product {
  id                  String     @id @default(uuid())
  object              String?
  active              Boolean?
  description         String?
  metadata            Json?
  name                String?
  created             Int?
  images              Json?
  livemode            Boolean?
  package_dimensions  Json?
  shippable           Boolean?
  statement_descriptor String?
  unit_label          String?
  updated             Int?
  url                 String?

  @@map("stripe.products")
}

model Customer {
  id                   String       @id @default(cuid())
  object               String?
  address              Json?
  description          String?
  email                String?
  metadata             Json?
  name                 String?
  phone                String?
  shipping             Json?
  balance              Int?
  created              Int?
  currency             String?
  default_source       String?
  delinquent           Boolean?
  discount             Json?
  invoice_prefix       String?
  invoice_settings     Json?
  livemode             Boolean?
  next_invoice_sequence Int?
  preferred_locales    Json?
  tax_exempt           String?
  invoices      Invoice[]              @relation("invoices_customer")
  @@map("stripe.customers")
}

enum PricingType {
  one_time
  recurring
}

enum PricingTiers {
  graduated
  volume
}

model Price {
  id                  String            @id
  object              String
  active              Boolean
  currency            String
  metadata            Json
  nickname            String?
  recurring           Json?
  type                PricingType
  unit_amount         Int
  billing_scheme      String?
  created             Int
  livemode            Boolean
  lookup_key          String?
  tiers_mode          PricingTiers
  transform_quantity  Json?
  unit_amount_decimal String?

  product             String             @relation("PriceToProduct", fields: [product], references: [id])
}

enum SubscriptionStatus {
  trialing
  active
  canceled
  incomplete
  incomplete_expired
  past_due
  unpaid
}

model Subscriptions {
  id                       String               @id @default(dbgenerated())
  object                   String?
  cancel_at_period_end     Boolean?
  current_period_end       Int?
  current_period_start     Int?
  default_payment_method   String?
  items                    Json?
  metadata                 Json?
  pending_setup_intent     String?
  pending_update           Json?
  status                   SubscriptionStatus?
  application_fee_percent  Float?
  billing_cycle_anchor     Int?
  billing_thresholds       Json?
  cancel_at                Int?
  canceled_at              Int?
  collection_method        String?
  created                  Int?
  days_until_due           Int?
  default_source           String?
  default_tax_rates        Json?
  discount                 Json?
  ended_at                 Int?
  livemode                 Boolean?
  next_pending_invoice_item_invoice Int?
  pause_collection         Json?
  pending_invoice_item_interval Json?
  start_date               Int?
  transfer_data            Json?
  trial_end                Json?
  trial_start              Json?
  schedule                 String?
  customer                 String               @references(Customer.id)
  latest_invoice           String?              // not yet joined
  plan                     String?              // not yet joined
  
  invoices      Invoice[]              @relation("invoices_subscription")
}

enum InvoiceStatus {
  draft
  open
  paid
  uncollectible
  void
}

model Invoice {
  id                        String                  @id @default(cuid())
  object                    String?
  auto_advance              Boolean?
  collection_method         String?
  currency                  String?
  description               String?
  hosted_invoice_url        String?
  lines                     Json?
  metadata                  Json?
  period_end                Int?
  period_start              Int?
  status                    InvoiceStatus?
  total                     Int?
  account_country           String?
  account_name              String?
  account_tax_ids           Json?
  amount_due                Int?
  amount_paid               Int?
  amount_remaining          Int?
  application_fee_amount    Int?
  attempt_count             Int?
  attempted                 Boolean?
  billing_reason            String?
  created                   Int?
  custom_fields             Json?
  customer_address          Json?
  customer_email            String?
  customer_name             String?
  customer_phone            String?
  customer_shipping         Json?
  customer_tax_exempt       String?
  customer_tax_ids          Json?
  default_tax_rates         Json?
  discount                  Json?
  discounts                 Json?
  due_date                  Int?
  ending_balance            Int?
  footer                    String?
  invoice_pdf               String?
  last_finalization_error   Json?
  livemode                  Boolean?
  next_payment_attempt      Int?
  number                    String?
  paid                      Boolean?
  payment_settings          Json?
  post_payment_credit_notes_amount    Int?
  pre_payment_credit_notes_amount     Int?
  receipt_number            String?
  starting_balance          Int?
  statement_descriptor      String?
  status_transitions        Json?
  subtotal                  Int?
  tax                       Int?
  total_discount_amounts    Json?
  total_tax_amounts         Json?
  transfer_data             Json?
  webhooks_delivered_at     Int?

  customer                  String?                @relation("invoices_customer", fields: [customer], references: [id])
  subscription              String?                @relation("invoices_subscription", fields: [subscription], references: [id])
  payment_intent            String?                // Not yet implemented
  default_payment_method    String?                // Not yet implemented
  default_source            String?                // Not yet implemented
  on_behalf_of              String?                // Not yet implemented
  charge                    String?                // Not yet implemented
}

